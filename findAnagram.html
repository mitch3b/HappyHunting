<!DOCTYPE html>
<html>
<body>

<h2>Helpful Links</h2>
<a href="https://www.boxentriq.com/code-breaking"> Boxentriq - code breaking tool </a><br>
<a href="https://www.thewordfinder.com/multiple-word-anagram-solver/"> Mult-word anagram solver </a>

<h2>Manual Unscrambler</h2>
<label for="fname">Jumbled Text:</label><br>
<input type="text" id="jumbledText" name="jumbledText" value="asdfg"><br>
<label for="fname">Letters Left:</label><br>
<p id="lettersLeft"></p>
<button id="randomizeButton" onclick="randomize()"> Randomize </button> <br>
<label for="lname">Solution:</label><br>
<input type="text" id="solutionText" name="solutionText" value=""><br><br>

<h2> Helpful images </h2>
<img src="codeKey.jpeg" style="width:700px" alt="Sign language, semaphore, braille, morse code">

</body>
<script>

  const jumbledTextToListenTo = document.getElementById('jumbledText');
  const solutionTextToListenTo = document.getElementById('solutionText');
  let prevSolutionText = document.getElementById('solutionText').value;

  jumbledTextToListenTo.addEventListener('input', updateLettersLeft);
  solutionTextToListenTo.addEventListener('input', updateLettersLeft);

  function updateLettersLeft() {
    let lettersLeft = document.getElementById('jumbledText').value;
    const solutionText = document.getElementById('solutionText').value.replace(/\s+/g, '');

    for (var i = 0; i < solutionText.length; i++) {
      const index = lettersLeft.indexOf(solutionText[i]);

      if(index != -1) {
        lettersLeft = removeByIndex(lettersLeft, index);
      }
      else {
        alert(solutionText[i] + " is not an available letter");
        document.getElementById('solutionText').value = prevSolutionText;
        return;
      }
    }

    prevSolutionText = document.getElementById('solutionText').value;

    document.getElementById('lettersLeft').textContent = lettersLeft;
  }

  function removeByIndex(str,index) {
      return str.slice(0,index) + str.slice(index+1);
  }

  function randomize() {
    let lettersLeft = document.getElementById('lettersLeft').textContent;

    lettersLeft = lettersLeft.split('').sort(function(){return 0.5-Math.random()}).join('');

    document.getElementById('lettersLeft').textContent = lettersLeft;
  }

  updateLettersLeft();

</script>
</html>
